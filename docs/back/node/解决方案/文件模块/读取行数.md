# 读取文件行数

需求背景：想要获取某个文件夹内，所有文件的代码总行数，并以md表格的格式输出；

```js
/**
 * 统计文件夹内每个文件的行数
 * @param {}  -
 * @returns {}
 */

// 引用文件系统模块
let fs = require("fs");

// 读取文件列表
function readFileList(path, filesList) {
    let files = fs.readdirSync(path);
    files.forEach(function (itm, index) {
        let stat = fs.statSync(path + itm);

        // 判断是否存在文件夹
        if (stat.isDirectory()) {
            // 递归读取文件
            readFileList(path + itm + "/", filesList);
        } else {
            let obj = {}; // 定义一个对象存放文件的路径和名字
            obj.path = path; // 路径
            obj.filename = itm; // 名字
            filesList.push(obj);
        }
    });
}

let getFiles = {
    // 获取文件夹下的所有文件
    getFileList: function (path) {
        let filesList = [];
        readFileList(path, filesList);
        return filesList;
    },
};
let totalLine = 0;
getFiles.getFileList("./intelligentCockpit/").forEach(function (item) {
    let dirState = fs.existsSync("./countLine"); // 判断目录是否存在
    if (!dirState) {
        fs.mkdirSync("./countLine"); // 创建目录
    }
    let state = fs.existsSync("./countLine/fileInfo.txt");
    let cData = "";
    if (state) {
        cData = fs.readFileSync("./countLine/fileInfo.txt"); // 同步读取统计文件内容
    }
    let filePath = item.path + item.filename;
    let content = fs.readFileSync(filePath);
    let codeLine = content.toString("utf8").split("\n").length;
    totalLine += codeLine;
    cData += `| ${filePath.slice(1)} | ${codeLine} |\n`;
    fs.writeFileSync("./countLine/fileInfo.txt", cData);
});
let sum = `| 合计 | **${totalLine}** |\n`;
fs.writeFileSync("./countLine/fileInfo.txt", sum, { flag: "a+" });
/* 
    | 文件名                                                       | 行数 |
    | ------------------------------------------------------------ | ---- |
    | appMain.styl                                                 | 103  |
    | appMainPlugin.vue                                            | 758  |
    | basic.js                                                     | 78   |
*/
function wraiteTemp(param) {}

```

