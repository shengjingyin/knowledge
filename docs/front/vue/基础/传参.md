## props 和 \$emit

### 父传子

> 使用 props 进行属性绑定传值

```vue
// A.vue

<my-cardInfo :cardData="cardData"></my-cardInfo>

// B.vue porps: ["cardData"]
```

### 子传父

> 使用自定义函数 $emit 给父组件传值，当子组件某个数值改变时，需要向父组件传值，则在这个 事件 的回调函数中，发射自定函数，this.$emit

```js
子组件
<p @click="transmitInfo"></p>
当点击子组件时，触发点击事件 transmitInfo() { var count = { 'name': 'shengjingyin' } this.$emit('transmitFunc', count) // 在这里就可以通过自定义发射函数，将count对象传递给父组件 } 父组件接收这个子组件的传递的函数 // 注意这里的 parentFunc
不需要任何参数，连括号也不能要， 否则无法传值
<my-cardInfo @transmitFunc="parentFunc" :data="card"></my-cardInfo>
parentFunc(data) { 这里的data就是子组件传递过来的 }
```

## $children 和 $parent

这两个方法的调用会使耦合度大大增加，不利于独立化开发，除非明确了结构的时候，可以使用，并且后续结构不会再改变

## \$refs

> 默认是一个空的对象类型，添加 ref 后会有

## \$root

> 直接访问 vue 实例， 但是一般 vue 实例中没有什么基础属性，都是一些重要的属性

## 插槽传值

### 子组件

```vue
<template>
    <div>
        <slot name="prefix" :data="Language"><button>123</button></slot>
    </div>
</template>
<script>
export default {
    data() {
        return {
            flag: false,
            Language: ["javascript", "go", "c++", "python", "c"], // 需要将 Language 传递给父组件展示
        };
    },
};
</script>
```

### 父组件

```vue
<my-cardInfo>
    // 父组件使用 slot-scope="slot" 就可以获取子组件通过插槽传递的数据，要在外层套一层 template 标签
   <template #prefix="{ data }">   
      <span> {{data.join(' * ')}} </span>
   </template>
</my-cardInfo>
```

## provide / inject / EventBus 组合使用

A\B 的共同父组件引入 **EventBus** 组件，通常这个组件为根组件。 

```js
import EventBus from "./dashboard/utils/eventBus";

provide() { 
    return { 
        EventBus: EventBus()
    };
},
```

A 组件 向 B 传值，A发射事件 `aaa`

```js
// A 
inject: ["EventBus"],
    
mounted() {
    const data = { key: '数据', value: '数据' }
    this.EventBus.$emit("aaa", data); 
}
```

B 组件 接收 A 发射的事件 `aaa`

```js
inject: ["EventBus"], 

mounted() { 
	this.EventBus.$on("aaa", (data) => {
        console.log("A传递的数据：", data)
    })
}
```

EventBus 组件，暴露一个匿名函数（返回vue实例），其中可以添加公用属性、方法

```js
import Vue from "vue";

export default () =>
    new Vue({
        data() {
            return {
                ChartInstance: {},
                chartConfig: {},
            };
        },
        created() {
            this.SJY = {};
        },
        methods: {},
    });
```
