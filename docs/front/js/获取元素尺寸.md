本文推荐结合代码实例阅读：[代码仓库直通车](https://gitee.com/sjy666666/juejin-case/blob/master/js%E5%9F%BA%E7%A1%80/2%E3%80%81%E8%8E%B7%E5%8F%96%E5%B0%BA%E5%AF%B8%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF.html)

为了方便理解我按照顺序，从大到小获取，依次是：屏幕尺寸、窗口尺寸、文档区尺寸、dom 位置。

## 获取屏幕尺寸

需要通过`window.screen`对象中获取当前屏幕的详情，这个方法获取到的属性值是以像素计算的，这个<u>不能作为</u>获取到当前屏幕是几 k 屏的依据（因为有缩放的关系，有的 2k 屏放大 200%后的宽高就没那么大了）

```js
// 一般获取到这四个就可以了，其它的不做关注
// height: 屏幕高度，像素计；
// width: .

let { height, width } = screen;
```

<img src="D:\Project\image-host\img/image-20210807224939987.png" style="zoom: 50%;" />

-   方式二

    ```js
    ```

## 获取窗口、文档区尺寸

关于浏览器的窗口有两种，一种是浏览器实际占据的像素尺寸（**红色框**），另一种是我们开发的页面占据的尺寸（文档区**蓝色框**）。实际我们开发中我们使用的地方只是在浏览器提供的窗口里（第二种情况）

![image-20210807232142984](D:\Project\article\掘金八月更文挑战\js篇\img\image-20210807232142984.png)

<img src="D:\Project\article\10、更文挑战\掘金八月更文挑战\js篇\img\image-20210807232142984.png" style="zoom: 33%;" />

### 获取方式

-   方式一，通过 window 对象获取，<u>这里的值可以被修改</u>

    ```js
    // 这四个值得对应关系如上图
    // outerHeight：浏览器当前可使用的高度，这里是860，其实就是减掉了任务管理器的高度，当你隐藏任务栏时，outerHeight就和height相等了；
    // innerHeight、innerWidth；文档显示区的宽高，不包含滚动条的长度（这个意思是没有显示的内容不算进来），自己去体会一下；
    let { innerHeight, innerWidth, outerHeight, outerWidth } = window;
    ```

-   方式二，通过 screen 对象获取，<u>这里的不可以被修改</u>

    这里只能获取到浏览器的可视宽高，文档区宽高获取不到

    ```js
    // availHeight, availWidth  等价于  outerHeight, outerWidth
    let { availHeight, availWidth } = screen;
    ```

## dom 位置

最常见的就是这种情况了，任意一个 dom 我怎么知道它的宽高，位置信息呢？，如下图所示有一个父元素，包含两个子元素。

### getComputedStyle

拿到这个案例，首先假设有这么一个需求，获取父元素的位置、宽高，可以借助一个 window 上的方法获取到该元素的所有 css 信息`getComputedStyle`

-   getComputedStyle 浅试

    <img src="D:\Project\image-host\img/image-20210808092122365.png" style="zoom: 33%;" />

    ```js
    const father = document.querySelector(".father");
    const style = window.getComputedStyle(father);
    console.log("father.getComputedStyle", style);
    ```

    获取到的属性值简直不要太多，如下图所示，密密麻麻，可以从中获取到自己想要的任何信息

    > 扩展：由 dom 如此多的属性足以可见真实的 dom 元素是多么复杂，所以 vue 会先生成虚拟 dom 进行相关数据计算，再将结果渲染成真实 dom

    <img src="D:\Project\image-host\img/image-20210808100145485.png" style="zoom: 33%;" />

### 直接使用 dom 获取

    ```js
    const father = document.querySelector(".father");
    console.log("father", [father]);	// 小技巧：把元素放到数组内，展开可以看到全部属性数据~~ 超实用！！！
    ```

<img src="D:\Project\image-host\img/image-20210808103026628.png" style="zoom: 50%;" />

### getBoundingClientRect 获取

```js
father.getBoundingClientRect();
```

<img src="D:\Project\image-host\img/image-20210808115349042.png" style="zoom:50%;" />

 <img src="D:\Project\image-host\img/20210323184344815.png" style="zoom:33%;" />

```
// 对于位置信息上图已经很准确的表达清楚（x, y, top, left, bottom, right）；
// 唯一需要注意的是bottom、right和我们定位用的概念不一样，注意看图上；

// 对于 width、height 相当于 offsetWidth 、 offsetHeight，关于这两个的详解请继续往下看。
```

## 详解位置信息中三大家族的含义

前面我们已经能拿到所有的样式信息了，但这其中关于元素位置信息的属性（概念）有点多，让人脑壳有点疼，其中有**client 家族、scroll 家族、offset 家族**，这些属性都是很有用的信息，下面分别介绍

### client 家族

-   clientHeight 、clientWidth 结果只包含`content`+`padding`，联想记忆：**标准盒模型**

-   clientLeft、 clientTop 结果是 border-left、border-top 的值

    ![1231](D:\Project\image-host\img/image-20210808104126101.png)

```js
{
    clientHeight: 310,
    clientLeft: 10,
    clientTop: 0,
    clientWidth: 483
}
```

### scroll 家族

代表的是与滚动条相关的尺寸

-   scrollHeight、scrollWidth 结果只包含`content`，但是如果出现滚动条，<u>会包含滚动条未出现部分的尺寸</u>

-   scrollLeft、 scrollTop 结果代表滚动条滚动的距离

    -   表示滚动条到底的公式

        ```js
        const onScrollBottom = father.scrollTop + father.clientHeight === father.scrollHeight;
        ```

![](D:\Project\image-host\img/image-20210808105214396.png)

```js
{
    scrollHeight: 600,
    scrollLeft: 0,
    scrollTop: 108,
    scrollWidth: 483
}
```

### offset 家族

代表的是外围的尺寸，就是最外圈的尺寸

-   offsetHeight、offsetWidth 的结果就是`border` + `padding` + `content`，即：元素的可见部分

-   offsetLeft、 offsetTop 的结果返回当前元素*左上角*相对于 `HTMLElement.offsetParent`父节点的左边界偏移的像素值，左上角位于父元素中的坐标，可以衍生出其余三点位于父元素中的坐标

    ```js
    // 右上角
    const topRightCorner = {
        top: ele.offsetTop,
        right: ele.offsetLeft + ele.offsetWidth,
    };
    // 左下角
    const bottomLeftCorner = {
        bottom: ele.offsetTop + ele.offsetHeight,
        left: ele.offsetLeft,
    };
    // 右下角
    const bottomRightCorner = {
        bottom: ele.offsetTop + ele.offsetHeight,
        right: ele.offsetLeft + ele.offsetWidth,
    };
    ```

![](D:\Project\image-host\img/image-20210808112436745.png)

```js
{
    offsetHeight: 330,
    offsetLeft: 100,
    offsetTop: 200,
    offsetWidth: 520
}
```

#### 小结

对于上面的三大类位置信息，适用于每个 dom 元素，所以不对子元素进行分析，可以总结为以下几点：

-   拿元素位于父元素中的位置、以及尺寸？ 答：用 offset 家族；
-   拿元素内容可见内容尺寸？答：用 client 家族；
-   拿元素总的内容长度（包含滚动条以下没显示出来的）？答：用 scroll 家族

> 首先要分类好自己的需求，然后才能根据需求获取对应的位置信息。
